batch

# Add remote destinations
/socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=wildfly-001:add(host=wildfly-001,port=7600)
/socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=wildfly-002:add(host=wildfly-002,port=7600)
/socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=wildfly-003:add(host=wildfly-003,port=7600)

# add cache container
/subsystem=infinispan/cache-container=example:add()
/subsystem=infinispan/cache-container=example:write-attribute(name=default-cache, value=example)
/subsystem=infinispan/cache-container=example:write-attribute(name=statistics-enabled,value=true)

# set the transport channel for cache container
/subsystem=jgroups/channel=ch_example:add(cluster=ch_exampleexample, module=org.wildfly.clustering.server, stack=tcp, statistics-enabled=true, stats-enabled=true)
/subsystem=infinispan/cache-container=example/transport=jgroups:add(channel=ch_example)

# Add the cache
/subsystem=infinispan/cache-container=example/replicated-cache=example:add()
/subsystem=infinispan/cache-container=example/replicated-cache=example:write-attribute(name=statistics-enabled,value=true)
/subsystem=infinispan/cache-container=example/replicated-cache=example/store=file:add(fetch-state=false,max-batch-size=100,passivation=true,preload=false,purge=true,relative-to=jboss.server.data.dir,shared=false)
/subsystem=infinispan/cache-container=example/replicated-cache=example/component=transaction:add(mode=FULL_XA,locking=PESSIMISTIC,stop-timeout=60000)
/subsystem=infinispan/cache-container=example/replicated-cache=example/component=state-transfer:add(chunk-size=512, timeout=60000)

# Add the cache
/subsystem=infinispan/cache-container=example/replicated-cache=job:add()
/subsystem=infinispan/cache-container=example/replicated-cache=job:write-attribute(name=statistics-enabled,value=true)
/subsystem=infinispan/cache-container=example/replicated-cache=job/store=file:add(fetch-state=false,max-batch-size=100,passivation=true,preload=false,purge=true,relative-to=jboss.server.data.dir,shared=false)
/subsystem=infinispan/cache-container=example/replicated-cache=job/component=transaction:add(mode=FULL_XA,locking=PESSIMISTIC,stop-timeout=60000)
/subsystem=infinispan/cache-container=example/replicated-cache=job/component=locking:add(isolation=REPEATABLE_READ, striping=true)
/subsystem=infinispan/cache-container=example/replicated-cache=job/component=state-transfer:add(chunk-size=512, timeout=60000)

run-batch
